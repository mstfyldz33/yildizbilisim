import{d as e,j as a}from"./index-5OoLnQJN.js";import{r as l}from"./react-vendor-CCsTzcwv.js";import{j as s,h as i}from"./firebase-vendor-BOy9xtg7.js";const r=()=>{const[r,t]=l.useState(!1),[n,c]=l.useState(0),[o,d]=l.useState([]),[m,g]=l.useState(!0);l.useEffect(()=>{h()},[]);const h=async()=>{try{const a=await s(i(e,"gallery"));if(a.empty){const a=(await s(i(e,"project_images"))).docs.filter(e=>"project"===e.data().category).map((e,a)=>{var l,s;const i=e.data(),r=(null==(s=null==(l=i.created_at)?void 0:l.toMillis)?void 0:s.call(l))??i.created_at??0;return{title:i.title||`Proje ${a+1}`,count:i.description??"",image:i.image_url,_sort:r}});a.sort((e,a)=>(a._sort||0)-(e._sort||0)),a.length>0?d(a.map(({_sort:e,...a})=>a)):d(j())}else{const e=a.docs.map(e=>{var a,l;const s=e.data(),i=(null==(l=null==(a=s.created_at)?void 0:a.toMillis)?void 0:l.call(a))??s.created_at??0;return{title:s.title||"Galeri Öğesi",count:s.count??s.description??"",image:s.image_url,_sort:i}});e.sort((e,a)=>(a._sort||0)-(e._sort||0)),d(e.map(({_sort:e,...a})=>a))}}catch(a){d(j())}finally{g(!1)}},j=()=>[],x=()=>{t(!1),document.body.style.overflow=""};return m?a.jsx("section",{id:"gallery",className:"gallery",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"gallery-header",children:[a.jsx("h2",{children:"Proje Galerisi"}),a.jsx("p",{children:"Tamamladığımız projelerden görüntüler"})]}),a.jsx("div",{className:"admin-loading",children:a.jsx("i",{className:"fas fa-spinner fa-spin"})})]})}):a.jsxs(a.Fragment,{children:[a.jsx("section",{id:"gallery",className:"gallery",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"gallery-header",children:[a.jsx("h2",{children:"Proje Galerisi"}),a.jsx("p",{children:"Tamamladığımız projelerden görüntüler"})]}),0===o.length?a.jsx("div",{className:"admin-empty",children:"Henüz galeri görseli bulunmamaktadır."}):a.jsx("div",{className:"gallery-grid",children:o.map((e,l)=>a.jsxs("div",{className:"gallery-item",onClick:()=>(e=>{c(e),t(!0),document.body.style.overflow="hidden"})(l),children:[a.jsxs("div",{className:"gallery-image",children:[e.image?a.jsx("img",{src:e.image,alt:e.title?`${e.title} - Yıldız Bilişim Güvenlik Kamera Kurulum Projesi`:"Güvenlik kamera kurulum projesi görseli",loading:"lazy",fetchPriority:"low",decoding:"async",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):null,a.jsx("div",{className:"gallery-image-fallback",style:{display:e.image?"none":"flex"},children:a.jsx("i",{className:"fas fa-image"})})]}),a.jsxs("div",{className:"gallery-overlay",children:[a.jsx("h4",{children:e.title}),a.jsx("p",{children:e.count}),a.jsx("button",{className:"gallery-btn","aria-label":"Görüntüle",children:a.jsx("i",{className:"fas fa-search-plus"})})]})]},l))})]})}),r&&a.jsx("div",{className:"lightbox active",onClick:x,children:a.jsxs("div",{className:"lightbox-content",onClick:e=>e.stopPropagation(),children:[a.jsx("button",{className:"lightbox-close",onClick:x,"aria-label":"Kapat",children:a.jsx("i",{className:"fas fa-times"})}),a.jsx("button",{className:"lightbox-prev",onClick:()=>{c(e=>(e-1+o.length)%o.length)},"aria-label":"Önceki",children:a.jsx("i",{className:"fas fa-chevron-left"})}),a.jsx("button",{className:"lightbox-next",onClick:()=>{c(e=>(e+1)%o.length)},"aria-label":"Sonraki",children:a.jsx("i",{className:"fas fa-chevron-right"})}),a.jsxs("div",{className:"lightbox-image-container",children:[o[n].image?a.jsx("img",{src:o[n].image,alt:o[n].title?`${o[n].title} - Yıldız Bilişim Güvenlik Kamera Kurulum Projesi`:"Güvenlik kamera kurulum projesi görseli",className:"lightbox-image",fetchPriority:"high"}):a.jsx("div",{className:"gallery-image",children:a.jsx("i",{className:"fas fa-image"})}),a.jsxs("div",{className:"lightbox-info",children:[a.jsx("h3",{children:o[n].title}),a.jsx("p",{children:o[n].count})]})]})]})})]})},t=()=>a.jsx(r,{});export{t as default};
