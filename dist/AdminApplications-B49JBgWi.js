import{d as a,j as s}from"./index-DuKwbuAV.js";import{r as i}from"./react-vendor-CCsTzcwv.js";import{q as e,h as n,l,j as c,v as d,p as t}from"./firebase-vendor-BOy9xtg7.js";const r=()=>{const[r,m]=i.useState([]),[p,o]=i.useState(!0),[h,j]=i.useState(null);i.useEffect(()=>{x()},[]);const x=async()=>{try{const s=e(n(a,"job_applications"),l("created_at","desc")),i=(await c(s)).docs.map(a=>({id:a.id,...a.data()}));m(i)}catch(s){}finally{o(!1)}},f=a=>({technical:"Teknik Uzman / Kurulum Uzmanı",sales:"Satış Temsilcisi",support:"Teknik Destek Uzmanı",other:"Diğer"}[a]||a);return p?s.jsxs("div",{className:"admin-loading",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),s.jsx("p",{children:"Yükleniyor..."})]}):s.jsxs("div",{className:"admin-applications",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("h1",{children:"İş Başvuruları"}),s.jsxs("span",{className:"admin-badge-info",children:[r.length," başvuru"]})]}),s.jsxs("div",{className:"admin-applications-container",children:[s.jsx("div",{className:"admin-applications-list",children:0===r.length?s.jsxs("div",{className:"admin-empty-state",children:[s.jsx("i",{className:"fas fa-briefcase"}),s.jsx("p",{children:"Henüz başvuru yok"})]}):r.map(a=>s.jsxs("div",{className:"admin-application-item "+((null==h?void 0:h.id)===a.id?"active":""),onClick:()=>j(a),children:[s.jsxs("div",{className:"admin-application-header",children:[s.jsxs("div",{children:[s.jsx("strong",{children:a.name}),s.jsx("span",{className:"admin-application-position",children:f(a.position)})]}),s.jsx("span",{className:"admin-application-date",children:new Date(a.created_at).toLocaleDateString("tr-TR")})]}),s.jsxs("div",{className:"admin-application-contact",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-envelope"})," ",a.email]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-phone"})," ",a.phone]})]})]},a.id))}),h&&s.jsxs("div",{className:"admin-application-detail",children:[s.jsxs("div",{className:"admin-application-detail-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:h.name}),s.jsxs("p",{className:"admin-application-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-briefcase"})," ",f(h.position)]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-envelope"})," ",h.email]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-phone"})," ",h.phone]}),s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-calendar"})," ",new Date(h.created_at).toLocaleString("tr-TR")]})]})]}),s.jsxs("button",{onClick:()=>(async s=>{if(confirm("Bu başvuruyu silmek istediğinizden emin misiniz?"))try{await d(t(a,"job_applications",s)),x(),(null==h?void 0:h.id)===s&&j(null)}catch(i){alert("Hata: "+i.message)}})(h.id),className:"admin-btn-delete",children:[s.jsx("i",{className:"fas fa-trash"})," Sil"]})]}),s.jsxs("div",{className:"admin-application-content",children:[s.jsxs("div",{className:"admin-application-section",children:[s.jsx("h3",{children:"Deneyim"}),s.jsx("p",{children:h.experience||"Belirtilmemiş"})]}),h.cv_url&&s.jsxs("div",{className:"admin-application-section",children:[s.jsx("h3",{children:"CV"}),s.jsxs("a",{href:h.cv_url,target:"_blank",rel:"noopener noreferrer",className:"admin-cv-link",children:[s.jsx("i",{className:"fas fa-file-pdf"})," CV'yi İndir"]})]})]})]})]})]})};export{r as default};
