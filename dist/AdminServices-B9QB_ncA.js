import{u as e,d as s,j as a}from"./index-BrpJXW3I.js";import{r as i}from"./react-vendor-CCsTzcwv.js";import{q as n,h as l,l as t,j as c,v as d,p as r,e as m,x as o,f as h}from"./firebase-vendor-uW-vpOO9.js";const x=()=>{const{showToast:x}=e(),[j,u]=i.useState([]),[v,p]=i.useState(!0),[f,N]=i.useState(!1),[k,y]=i.useState(null),[b,g]=i.useState({icon:"fa-video",title:"",description:""});i.useEffect(()=>{z()},[]);const z=async()=>{try{const e=n(l(s,"services"),t("created_at","asc")),a=(await c(e)).docs.map(e=>({id:e.id,...e.data()}));u(a)}catch(e){u([])}finally{p(!1)}},C=()=>{g({icon:"fa-video",title:"",description:""})};return v?a.jsxs("div",{className:"admin-loading",children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),a.jsx("p",{children:"Yükleniyor..."})]}):a.jsxs("div",{className:"admin-services",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsx("h1",{children:"Hizmet Paketleri Yönetimi"}),a.jsxs("button",{onClick:()=>{y(null),C(),N(!0)},className:"admin-btn-primary",children:[a.jsx("i",{className:"fas fa-plus"})," Yeni Hizmet"]})]}),a.jsx("div",{className:"admin-services-grid",children:0===j.length?a.jsx("div",{className:"admin-empty",children:"Henüz hizmet yok. İlk hizmeti ekleyin!"}):j.map(e=>a.jsxs("div",{className:"admin-service-card",children:[a.jsx("div",{className:"admin-service-icon",children:a.jsx("i",{className:`fas ${e.icon}`})}),a.jsxs("div",{className:"admin-service-info",children:[a.jsx("h3",{children:e.title}),a.jsx("p",{children:e.description})]}),a.jsxs("div",{className:"admin-service-actions",children:[a.jsxs("button",{onClick:()=>(e=>{y(e),g({icon:e.icon||"fa-video",title:e.title||"",description:e.description||""}),N(!0)})(e),className:"admin-btn-edit",children:[a.jsx("i",{className:"fas fa-pen-to-square"})," Düzenle"]}),a.jsxs("button",{onClick:()=>(async e=>{if(confirm("Bu hizmeti silmek istediğinizden emin misiniz?"))try{await d(r(s,"services",e)),z(),x("Hizmet silindi!","success")}catch(a){x("Hata: "+a.message,"error")}})(e.id),className:"admin-btn-delete",children:[a.jsx("i",{className:"fas fa-trash"})," Sil"]})]})]},e.id))}),f&&a.jsx("div",{className:"admin-modal-overlay",onClick:()=>N(!1),children:a.jsxs("div",{className:"admin-modal",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h2",{children:k?"Hizmet Düzenle":"Yeni Hizmet"}),a.jsx("button",{onClick:()=>N(!1),className:"admin-modal-close",children:a.jsx("i",{className:"fas fa-times"})})]}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...b,created_at:k?void 0:m(),updated_at:m()};k?await o(r(s,"services",k.id),e):await h(l(s,"services"),e),N(!1),y(null),C(),z(),x(k?"Hizmet güncellendi!":"Hizmet eklendi!","success")}catch(a){x("Hata: "+a.message,"error")}},className:"admin-modal-form",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Başlık *"}),a.jsx("input",{type:"text",value:b.title,onChange:e=>g({...b,title:e.target.value}),placeholder:"Örn: IP Kamera Sistemleri",required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Açıklama *"}),a.jsx("textarea",{value:b.description,onChange:e=>g({...b,description:e.target.value}),rows:"3",placeholder:"Örn: Yüksek çözünürlüklü IP kameralar ile net görüntü kalitesi",required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"İkon (Font Awesome class) *"}),a.jsx("input",{type:"text",value:b.icon,onChange:e=>g({...b,icon:e.target.value}),placeholder:"fa-video",required:!0})]}),a.jsxs("div",{className:"admin-modal-actions",children:[a.jsx("button",{type:"button",onClick:()=>N(!1),className:"admin-btn-secondary",children:"İptal"}),a.jsx("button",{type:"submit",className:"admin-btn-primary",children:k?"Güncelle":"Kaydet"})]})]})]})})]})};export{x as default};
