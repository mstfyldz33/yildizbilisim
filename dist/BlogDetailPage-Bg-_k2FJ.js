import{d as e,j as a,S as t,a as s}from"./index-5OoLnQJN.js";import{h as l,c as i,r,L as n}from"./react-vendor-CCsTzcwv.js";import{p as c,t as o,q as d,h as m,w as g,l as h,m as p,j as x}from"./firebase-vendor-BOy9xtg7.js";const j=()=>{const{id:j}=l();i();const[b,y]=r.useState(null),[u,f]=r.useState(!0),[N,k]=r.useState(null),[w,v]=r.useState([]);r.useEffect(()=>{j&&z()},[j]);const z=async()=>{try{const a=c(e,"blog_posts",j),t=await o(a);if(t.exists()){const e={id:t.id,...t.data()};y(e),_(e)}else k("Blog yazısı bulunamadı")}catch(a){k("Blog yazısı yüklenirken bir hata oluştu")}finally{f(!1)}},_=async a=>{try{let s;try{let t;t=a.category?d(m(e,"blog_posts"),g("category","==",a.category),h("date","desc"),p(4)):d(m(e,"blog_posts"),h("date","desc"),p(4)),s=await x(t)}catch(t){let l;l=a.category?d(m(e,"blog_posts"),g("category","==",a.category),h("created_at","desc"),p(4)):d(m(e,"blog_posts"),h("created_at","desc"),p(4)),s=await x(l)}const l=s.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.id!==a.id).slice(0,3);v(l)}catch(s){v([])}};if(u)return a.jsxs(a.Fragment,{children:[a.jsx(t,{title:"Yükleniyor... - Yıldız Bilişim",description:"Blog yazısı yükleniyor"}),a.jsx("section",{className:"blog-detail-page",children:a.jsx("div",{className:"container",children:a.jsx("div",{className:"admin-loading",style:{minHeight:"50vh",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"3rem",color:"var(--color-primary)"}})})})})]});if(N||!b)return a.jsxs(a.Fragment,{children:[a.jsx(t,{title:"Blog Yazısı Bulunamadı - Yıldız Bilişim",description:"Aradığınız blog yazısı bulunamadı"}),a.jsx("section",{className:"blog-detail-page",children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"blog-detail-error",children:[a.jsx("div",{className:"error-icon",children:a.jsx("i",{className:"fas fa-exclamation-triangle"})}),a.jsx("h2",{children:"Blog Yazısı Bulunamadı"}),a.jsx("p",{children:N||"Aradığınız blog yazısı mevcut değil veya silinmiş olabilir."}),a.jsxs(n,{to:"/blog",className:"btn btn-primary",children:[a.jsx("i",{className:"fas fa-arrow-left"})," Blog Sayfasına Dön"]})]})})})]});const B=(e=>{if(!e)return 1;const a=e.split(/\s+/).length;return Math.ceil(a/200)||1})(b.content||b.excerpt||""),S=`${window.location.origin}/blog/${j}`,$=encodeURIComponent(`${b.title} - Yıldız Bilişim`);return r.useEffect(()=>{if(!b)return;const e=e=>{if(!e)return(new Date).toISOString();try{let a;return a=e&&"object"==typeof e&&e.toDate?e.toDate():e&&"object"==typeof e&&e.seconds?new Date(1e3*e.seconds):new Date(e),a.toISOString()}catch{return(new Date).toISOString()}},a={"@context":"https://schema.org","@type":"Article",headline:b.title,description:b.excerpt||b.title,image:b.image_url?`https://yildizcloud.com${b.image_url.startsWith("http"),""}${b.image_url}`:"https://yildizcloud.com/logo.png",datePublished:e(b.date||b.created_at),dateModified:e(b.updated_at||b.date||b.created_at),author:{"@type":"Organization",name:"Yıldız Bilişim",url:"https://yildizcloud.com"},publisher:{"@type":"Organization",name:"Yıldız Bilişim",logo:{"@type":"ImageObject",url:"https://yildizcloud.com/logo.png"}},mainEntityOfPage:{"@type":"WebPage","@id":`https://yildizcloud.com/blog/${j}`},keywords:b.tags?Array.isArray(b.tags)?b.tags.join(", "):b.tags:"",articleSection:b.category||"Güvenlik Kamera Sistemleri",wordCount:b.content?b.content.split(/\s+/).length:0};let t=document.querySelector("script[data-article-schema]");return t||(t=document.createElement("script"),t.type="application/ld+json",t.setAttribute("data-article-schema","true"),document.head.appendChild(t)),t.textContent=JSON.stringify(a),()=>{const e=document.querySelector("script[data-article-schema]");e&&e.remove()}},[b,j]),a.jsxs(a.Fragment,{children:[a.jsx(t,{title:`${b.title} - Yıldız Bilişim Blog`,description:b.excerpt||b.title,keywords:b.tags?Array.isArray(b.tags)?b.tags.join(", "):b.tags:"",image:b.image_url||"/logo.png",type:"article"}),a.jsx("section",{className:"blog-detail-page",children:a.jsxs("div",{className:"container",children:[a.jsx(s,{items:[{label:"Ana Sayfa",url:"/"},{label:"Blog",url:"/blog"},{label:b.title,url:`/blog/${j}`,isLast:!0}]}),a.jsxs("article",{className:"blog-detail-article",children:[a.jsxs("header",{className:"blog-detail-header",children:[b.category&&a.jsxs("span",{className:"blog-detail-category",children:[a.jsx("i",{className:"fas fa-tag"})," ",b.category]}),a.jsx("h1",{children:b.title}),a.jsxs("div",{className:"blog-detail-meta",children:[a.jsxs("span",{className:"blog-detail-date",children:[a.jsx("i",{className:"far fa-calendar"})," ",(e=>{if(!e)return"";try{let a;return a=e&&"object"==typeof e&&e.toDate?e.toDate():e&&"object"==typeof e&&e.seconds?new Date(1e3*e.seconds):new Date(e),isNaN(a.getTime())?"":a.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})}catch(a){return""}})(b.date||b.created_at)||"Tarih belirtilmemiş"]}),a.jsxs("span",{className:"blog-detail-reading-time",children:[a.jsx("i",{className:"fas fa-clock"})," ",B," dakika okuma"]})]})]}),b.image_url&&a.jsx("div",{className:"blog-detail-image",children:a.jsx("img",{src:b.image_url,alt:b.title?`${b.title} - Yıldız Bilişim Güvenlik Kamera Sistemleri Blog`:"Güvenlik kamera sistemleri blog görseli",loading:"eager",fetchPriority:"high"})}),a.jsx("div",{className:"blog-detail-content",children:b.content?a.jsx("div",{className:"blog-full-content",children:b.content.split("\n").map((e,t)=>e.trim()?a.jsx("p",{children:e.trim()},t):a.jsx("br",{},t))}):a.jsx("div",{className:"blog-full-content",children:a.jsx("p",{children:b.excerpt||"Bu blog yazısının içeriği henüz eklenmemiş."})})}),b.tags&&a.jsxs("div",{className:"blog-detail-tags",children:[a.jsx("h4",{children:"Etiketler:"}),a.jsx("div",{className:"tags-list",children:Array.isArray(b.tags)?b.tags.map((e,t)=>a.jsx("span",{className:"tag",children:e},t)):a.jsx("span",{className:"tag",children:b.tags})})]}),a.jsxs("div",{className:"blog-detail-share",children:[a.jsx("h4",{children:"Paylaş:"}),a.jsxs("div",{className:"share-buttons",children:[a.jsxs("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(S)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-facebook","aria-label":"Facebook'ta paylaş",children:[a.jsx("i",{className:"fab fa-facebook-f"}),a.jsx("span",{children:"Facebook"})]}),a.jsxs("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(S)}&text=${$}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-twitter","aria-label":"Twitter'da paylaş",children:[a.jsx("i",{className:"fab fa-twitter"}),a.jsx("span",{children:"Twitter"})]}),a.jsxs("a",{href:`https://wa.me/?text=${encodeURIComponent(`${b.title} ${S}`)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-whatsapp","aria-label":"WhatsApp'ta paylaş",children:[a.jsx("i",{className:"fab fa-whatsapp"}),a.jsx("span",{children:"WhatsApp"})]}),a.jsxs("a",{href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(S)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-linkedin","aria-label":"LinkedIn'de paylaş",children:[a.jsx("i",{className:"fab fa-linkedin-in"}),a.jsx("span",{children:"LinkedIn"})]}),a.jsxs("button",{className:"share-btn share-copy",onClick:()=>{navigator.clipboard.writeText(S),window.showToast?window.showToast("Link kopyalandı!","success"):alert("Link kopyalandı!")},"aria-label":"Linki kopyala",children:[a.jsx("i",{className:"fas fa-link"}),a.jsx("span",{children:"Kopyala"})]})]})]})]}),w.length>0&&a.jsxs("div",{className:"blog-related-posts",children:[a.jsx("h3",{children:"İlgili Yazılar"}),a.jsx("div",{className:"related-posts-grid",children:w.map(e=>a.jsxs(n,{to:`/blog/${e.id}`,className:"related-post-card",children:[e.image_url&&a.jsx("div",{className:"related-post-image",children:a.jsx("img",{src:e.image_url,alt:e.title?`${e.title} - Yıldız Bilişim Blog`:"İlgili blog yazısı görseli"})}),a.jsxs("div",{className:"related-post-content",children:[e.category&&a.jsx("span",{className:"related-post-category",children:e.category}),a.jsx("h4",{children:e.title}),e.excerpt&&a.jsxs("p",{children:[e.excerpt.substring(0,100),"..."]}),a.jsxs("span",{className:"related-post-link",children:["Devamını Oku ",a.jsx("i",{className:"fas fa-arrow-right"})]})]})]},e.id))})]}),a.jsx("div",{className:"blog-detail-navigation",children:a.jsxs(n,{to:"/blog",className:"btn btn-secondary",children:[a.jsx("i",{className:"fas fa-arrow-left"})," Tüm Blog Yazılarına Dön"]})})]})})]})};export{j as default};
