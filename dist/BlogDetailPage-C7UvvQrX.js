import{d as a,j as e,S as s}from"./index-DuKwbuAV.js";import{h as l,c as t,r as i,L as r}from"./react-vendor-CCsTzcwv.js";import{p as n,t as c,q as o,h as d,w as h,l as m,m as g,j as x}from"./firebase-vendor-BOy9xtg7.js";const j=()=>{const{id:j}=l();t();const[p,b]=i.useState(null),[f,y]=i.useState(!0),[N,u]=i.useState(null),[k,w]=i.useState([]);i.useEffect(()=>{j&&v()},[j]);const v=async()=>{try{const e=n(a,"blog_posts",j),s=await c(e);if(s.exists()){const a={id:s.id,...s.data()};b(a),z(a)}else u("Blog yazısı bulunamadı")}catch(e){u("Blog yazısı yüklenirken bir hata oluştu")}finally{y(!1)}},z=async e=>{try{let l;try{let s;s=e.category?o(d(a,"blog_posts"),h("category","==",e.category),m("date","desc"),g(4)):o(d(a,"blog_posts"),m("date","desc"),g(4)),l=await x(s)}catch(s){let t;t=e.category?o(d(a,"blog_posts"),h("category","==",e.category),m("created_at","desc"),g(4)):o(d(a,"blog_posts"),m("created_at","desc"),g(4)),l=await x(t)}const t=l.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.id!==e.id).slice(0,3);w(t)}catch(l){w([])}};if(f)return e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Yükleniyor... - Yıldız Bilişim",description:"Blog yazısı yükleniyor"}),e.jsx("section",{className:"blog-detail-page",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"admin-loading",style:{minHeight:"50vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"3rem",color:"var(--color-primary)"}})})})})]});if(N||!p)return e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Blog Yazısı Bulunamadı - Yıldız Bilişim",description:"Aradığınız blog yazısı bulunamadı"}),e.jsx("section",{className:"blog-detail-page",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"blog-detail-error",children:[e.jsx("div",{className:"error-icon",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsx("h2",{children:"Blog Yazısı Bulunamadı"}),e.jsx("p",{children:N||"Aradığınız blog yazısı mevcut değil veya silinmiş olabilir."}),e.jsxs(r,{to:"/blog",className:"btn btn-primary",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Blog Sayfasına Dön"]})]})})})]});const _=(a=>{if(!a)return 1;const e=a.split(/\s+/).length;return Math.ceil(e/200)||1})(p.content||p.excerpt||""),B=`${window.location.origin}/blog/${j}`,$=encodeURIComponent(`${p.title} - Yıldız Bilişim`);return e.jsxs(e.Fragment,{children:[e.jsx(s,{title:`${p.title} - Yıldız Bilişim Blog`,description:p.excerpt||p.title,keywords:p.tags?Array.isArray(p.tags)?p.tags.join(", "):p.tags:"",image:p.image_url||"/logo.png"}),e.jsx("section",{className:"blog-detail-page",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"blog-detail-breadcrumb",children:[e.jsx(r,{to:"/",children:"Ana Sayfa"}),e.jsx("i",{className:"fas fa-chevron-right"}),e.jsx(r,{to:"/blog",children:"Blog"}),e.jsx("i",{className:"fas fa-chevron-right"}),e.jsx("span",{children:p.title})]}),e.jsxs("article",{className:"blog-detail-article",children:[e.jsxs("header",{className:"blog-detail-header",children:[p.category&&e.jsxs("span",{className:"blog-detail-category",children:[e.jsx("i",{className:"fas fa-tag"})," ",p.category]}),e.jsx("h1",{children:p.title}),e.jsxs("div",{className:"blog-detail-meta",children:[e.jsxs("span",{className:"blog-detail-date",children:[e.jsx("i",{className:"far fa-calendar"})," ",(a=>{if(!a)return"";try{let e;return e=a&&"object"==typeof a&&a.toDate?a.toDate():a&&"object"==typeof a&&a.seconds?new Date(1e3*a.seconds):new Date(a),isNaN(e.getTime())?"":e.toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})}catch(e){return""}})(p.date||p.created_at)||"Tarih belirtilmemiş"]}),e.jsxs("span",{className:"blog-detail-reading-time",children:[e.jsx("i",{className:"fas fa-clock"})," ",_," dakika okuma"]})]})]}),p.image_url&&e.jsx("div",{className:"blog-detail-image",children:e.jsx("img",{src:p.image_url,alt:p.title,loading:"eager",fetchPriority:"high"})}),e.jsx("div",{className:"blog-detail-content",children:p.content?e.jsx("div",{className:"blog-full-content",children:p.content.split("\n").map((a,s)=>a.trim()?e.jsx("p",{children:a.trim()},s):e.jsx("br",{},s))}):e.jsx("div",{className:"blog-full-content",children:e.jsx("p",{children:p.excerpt||"Bu blog yazısının içeriği henüz eklenmemiş."})})}),p.tags&&e.jsxs("div",{className:"blog-detail-tags",children:[e.jsx("h4",{children:"Etiketler:"}),e.jsx("div",{className:"tags-list",children:Array.isArray(p.tags)?p.tags.map((a,s)=>e.jsx("span",{className:"tag",children:a},s)):e.jsx("span",{className:"tag",children:p.tags})})]}),e.jsxs("div",{className:"blog-detail-share",children:[e.jsx("h4",{children:"Paylaş:"}),e.jsxs("div",{className:"share-buttons",children:[e.jsxs("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(B)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-facebook","aria-label":"Facebook'ta paylaş",children:[e.jsx("i",{className:"fab fa-facebook-f"}),e.jsx("span",{children:"Facebook"})]}),e.jsxs("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(B)}&text=${$}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-twitter","aria-label":"Twitter'da paylaş",children:[e.jsx("i",{className:"fab fa-twitter"}),e.jsx("span",{children:"Twitter"})]}),e.jsxs("a",{href:`https://wa.me/?text=${encodeURIComponent(`${p.title} ${B}`)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-whatsapp","aria-label":"WhatsApp'ta paylaş",children:[e.jsx("i",{className:"fab fa-whatsapp"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsxs("a",{href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(B)}`,target:"_blank",rel:"noopener noreferrer",className:"share-btn share-linkedin","aria-label":"LinkedIn'de paylaş",children:[e.jsx("i",{className:"fab fa-linkedin-in"}),e.jsx("span",{children:"LinkedIn"})]}),e.jsxs("button",{className:"share-btn share-copy",onClick:()=>{navigator.clipboard.writeText(B),window.showToast?window.showToast("Link kopyalandı!","success"):alert("Link kopyalandı!")},"aria-label":"Linki kopyala",children:[e.jsx("i",{className:"fas fa-link"}),e.jsx("span",{children:"Kopyala"})]})]})]})]}),k.length>0&&e.jsxs("div",{className:"blog-related-posts",children:[e.jsx("h3",{children:"İlgili Yazılar"}),e.jsx("div",{className:"related-posts-grid",children:k.map(a=>e.jsxs(r,{to:`/blog/${a.id}`,className:"related-post-card",children:[a.image_url&&e.jsx("div",{className:"related-post-image",children:e.jsx("img",{src:a.image_url,alt:a.title})}),e.jsxs("div",{className:"related-post-content",children:[a.category&&e.jsx("span",{className:"related-post-category",children:a.category}),e.jsx("h4",{children:a.title}),a.excerpt&&e.jsxs("p",{children:[a.excerpt.substring(0,100),"..."]}),e.jsxs("span",{className:"related-post-link",children:["Devamını Oku ",e.jsx("i",{className:"fas fa-arrow-right"})]})]})]},a.id))})]}),e.jsx("div",{className:"blog-detail-navigation",children:e.jsxs(r,{to:"/blog",className:"btn btn-secondary",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Tüm Blog Yazılarına Dön"]})})]})})]})};export{j as default};
