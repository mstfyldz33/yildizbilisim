import{d as e,j as a}from"./index-BrpJXW3I.js";import{r as i}from"./react-vendor-CCsTzcwv.js";import{j as s,q as n,h as l,l as r,v as d,p as c,e as t,x as m,f as o}from"./firebase-vendor-uW-vpOO9.js";const p=()=>{const[p,h]=i.useState([]),[u,x]=i.useState([]),[j,k]=i.useState(!0),[g,_]=i.useState(!1),[f,v]=i.useState(!1),[N,b]=i.useState(null),[y,C]=i.useState(null),[z,S]=i.useState({package_type:"",package_name:"",description:"",camera_range:"",is_popular:!1,order_index:0}),[P,w]=i.useState({package_id:"",feature_name:"",feature_icon:"fa-check",is_included:!0,order_index:0});i.useEffect(()=>{q()},[]);const q=async()=>{try{const[a,i]=await Promise.all([s(n(l(e,"service_packages"),r("order_index","asc"))),s(n(l(e,"package_features"),r("order_index","asc")))]),d=a.docs.map(e=>({id:e.id,...e.data()})),c=i.docs.map(e=>({id:e.id,...e.data()}));h(d),x(c)}catch(a){h([]),x([])}finally{k(!1)}},K=()=>{S({package_type:"",package_name:"",description:"",camera_range:"",is_popular:!1,order_index:0})},A=()=>{w({package_id:"",feature_name:"",feature_icon:"fa-check",is_included:!0,order_index:0})};return j?a.jsxs("div",{className:"admin-loading",children:[a.jsx("i",{className:"fas fa-spinner fa-spin"}),a.jsx("p",{children:"Yükleniyor..."})]}):a.jsxs("div",{className:"admin-package-comparison",children:[a.jsxs("div",{className:"admin-page-header",children:[a.jsx("h1",{children:"Paket Karşılaştırma Yönetimi"}),a.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[a.jsxs("button",{onClick:()=>{b(null),K(),_(!0)},className:"admin-btn-primary",children:[a.jsx("i",{className:"fas fa-plus"})," Yeni Paket"]}),a.jsxs("button",{onClick:()=>{C(null),A(),v(!0)},className:"admin-btn-primary",children:[a.jsx("i",{className:"fas fa-plus"})," Yeni Özellik"]})]})]}),0===p.length?a.jsx("div",{className:"admin-empty",children:a.jsx("p",{children:"Henüz paket yok. İlk paketi ekleyin!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"admin-packages-grid",children:p.map(i=>{return a.jsxs("div",{className:"admin-package-card",children:[a.jsxs("div",{className:"admin-package-header",children:[a.jsx("h3",{children:i.package_name}),i.is_popular&&a.jsx("span",{className:"admin-badge",children:"Popüler"})]}),a.jsxs("div",{className:"admin-package-info",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Tip:"})," ",i.package_type]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Kamera Aralığı:"})," ",i.camera_range||"Belirtilmemiş"]}),i.description&&a.jsxs("p",{children:[a.jsx("strong",{children:"Açıklama:"})," ",i.description]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Özellik Sayısı:"})," ",(s=i.id,u.filter(e=>e.package_id===s)).length]})]}),a.jsxs("div",{className:"admin-package-actions",children:[a.jsxs("button",{onClick:()=>(e=>{b(e),S({package_type:e.package_type||"",package_name:e.package_name||"",description:e.description||"",camera_range:e.camera_range||"",is_popular:e.is_popular||!1,order_index:e.order_index||0}),_(!0)})(i),className:"admin-btn-edit",children:[a.jsx("i",{className:"fas fa-pen-to-square"})," Düzenle"]}),a.jsxs("button",{onClick:()=>(async a=>{if(confirm("Bu paketi silmek istediğinizden emin misiniz? Özellikleri de silinecek."))try{await d(c(e,"service_packages",a)),q()}catch(i){alert("Hata: "+i.message)}})(i.id),className:"admin-btn-delete",children:[a.jsx("i",{className:"fas fa-trash"})," Sil"]})]})]},i.id);var s})}),a.jsxs("div",{className:"admin-comparison-table-wrapper",children:[a.jsx("h2",{children:"Paket Özellikleri Karşılaştırması"}),a.jsx("div",{className:"admin-comparison-table-container",children:a.jsxs("table",{className:"admin-comparison-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Özellik"}),p.map(e=>a.jsxs("th",{children:[a.jsx("div",{children:e.package_name}),a.jsx("small",{children:e.camera_range})]},e.id))]})}),a.jsx("tbody",{children:[...new Set(u.map(e=>e.feature_name))].map(i=>a.jsxs("tr",{children:[a.jsx("td",{children:i}),p.map(s=>{const n=u.find(e=>e.package_id===s.id&&e.feature_name===i);return a.jsx("td",{children:n?a.jsxs("div",{className:"admin-feature-cell",children:[a.jsx("i",{className:`fas ${n.is_included?"fa-check":"fa-times"} ${n.is_included?"check":"times"}`}),a.jsx("button",{onClick:()=>(e=>{C(e),w({package_id:e.package_id||"",feature_name:e.feature_name||"",feature_icon:e.feature_icon||"fa-check",is_included:void 0===e.is_included||e.is_included,order_index:e.order_index||0}),v(!0)})(n),className:"admin-btn-icon-small",title:"Düzenle",children:a.jsx("i",{className:"fas fa-pen-to-square"})}),a.jsx("button",{onClick:()=>(async a=>{if(confirm("Bu özelliği silmek istediğinizden emin misiniz?"))try{await d(c(e,"package_features",a)),q()}catch(i){alert("Hata: "+i.message)}})(n.id),className:"admin-btn-icon-small admin-btn-danger",title:"Sil",children:a.jsx("i",{className:"fas fa-trash"})})]}):a.jsx("button",{onClick:()=>{w({package_id:s.id,feature_name:i,feature_icon:"fa-check",is_included:!0,order_index:u.length}),v(!0)},className:"admin-btn-icon-small",title:"Özellik Ekle",children:a.jsx("i",{className:"fas fa-plus"})})},s.id)})]},i))})]})})]})]}),g&&a.jsx("div",{className:"admin-modal-overlay",onClick:()=>_(!1),children:a.jsxs("div",{className:"admin-modal",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h2",{children:N?"Paket Düzenle":"Yeni Paket"}),a.jsx("button",{onClick:()=>_(!1),className:"admin-modal-close",children:a.jsx("i",{className:"fas fa-times"})})]}),a.jsxs("form",{onSubmit:async a=>{a.preventDefault();try{const a={...z,created_at:N?void 0:t(),updated_at:t()};N?await m(c(e,"service_packages",N.id),a):await o(l(e,"service_packages"),a),_(!1),b(null),K(),q()}catch(i){alert("Hata: "+i.message)}},className:"admin-modal-form",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Paket Tipi *"}),a.jsxs("select",{value:z.package_type,onChange:e=>S({...z,package_type:e.target.value}),required:!0,disabled:!!N,children:[a.jsx("option",{value:"",children:"Seçiniz"}),a.jsx("option",{value:"basic",children:"Temel (Basic)"}),a.jsx("option",{value:"standard",children:"Standart (Standard)"}),a.jsx("option",{value:"premium",children:"Premium"}),a.jsx("option",{value:"enterprise",children:"Kurumsal (Enterprise)"})]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Paket Adı *"}),a.jsx("input",{type:"text",value:z.package_name,onChange:e=>S({...z,package_name:e.target.value}),placeholder:"Örn: Temel Paket",required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Kamera Aralığı *"}),a.jsx("input",{type:"text",value:z.camera_range,onChange:e=>S({...z,camera_range:e.target.value}),placeholder:"Örn: 2-4 Kamera",required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Açıklama"}),a.jsx("textarea",{value:z.description,onChange:e=>S({...z,description:e.target.value}),rows:"3",placeholder:"Paket açıklaması"})]}),a.jsxs("div",{className:"admin-form-row",children:[a.jsx("div",{className:"admin-form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:z.is_popular,onChange:e=>S({...z,is_popular:e.target.checked})}),"Popüler Paket"]})}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Sıra No *"}),a.jsx("input",{type:"number",value:z.order_index,onChange:e=>S({...z,order_index:parseInt(e.target.value)||0}),required:!0,min:"0"})]})]}),a.jsxs("div",{className:"admin-modal-actions",children:[a.jsx("button",{type:"button",onClick:()=>_(!1),className:"admin-btn-secondary",children:"İptal"}),a.jsx("button",{type:"submit",className:"admin-btn-primary",children:N?"Güncelle":"Kaydet"})]})]})]})}),f&&a.jsx("div",{className:"admin-modal-overlay",onClick:()=>v(!1),children:a.jsxs("div",{className:"admin-modal",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"admin-modal-header",children:[a.jsx("h2",{children:y?"Özellik Düzenle":"Yeni Özellik"}),a.jsx("button",{onClick:()=>v(!1),className:"admin-modal-close",children:a.jsx("i",{className:"fas fa-times"})})]}),a.jsxs("form",{onSubmit:async a=>{a.preventDefault();try{const a={...P,created_at:y?void 0:t(),updated_at:t()};y?await m(c(e,"package_features",y.id),a):await o(l(e,"package_features"),a),v(!1),C(null),A(),q()}catch(i){alert("Hata: "+i.message)}},className:"admin-modal-form",children:[a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Paket *"}),a.jsxs("select",{value:P.package_id,onChange:e=>w({...P,package_id:e.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Seçiniz"}),p.map(e=>a.jsx("option",{value:e.id,children:e.package_name},e.id))]})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Özellik Adı *"}),a.jsx("input",{type:"text",value:P.feature_name,onChange:e=>w({...P,feature_name:e.target.value}),placeholder:"Örn: IP Kamera",required:!0})]}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"İkon (Font Awesome) *"}),a.jsx("input",{type:"text",value:P.feature_icon,onChange:e=>w({...P,feature_icon:e.target.value}),placeholder:"fa-video",required:!0})]}),a.jsxs("div",{className:"admin-form-row",children:[a.jsx("div",{className:"admin-form-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:P.is_included,onChange:e=>w({...P,is_included:e.target.checked})}),"Pakette Dahil"]})}),a.jsxs("div",{className:"admin-form-group",children:[a.jsx("label",{children:"Sıra No *"}),a.jsx("input",{type:"number",value:P.order_index,onChange:e=>w({...P,order_index:parseInt(e.target.value)||0}),required:!0,min:"0"})]})]}),a.jsxs("div",{className:"admin-modal-actions",children:[a.jsx("button",{type:"button",onClick:()=>v(!1),className:"admin-btn-secondary",children:"İptal"}),a.jsx("button",{type:"submit",className:"admin-btn-primary",children:y?"Güncelle":"Kaydet"})]})]})]})})]})};export{p as default};
